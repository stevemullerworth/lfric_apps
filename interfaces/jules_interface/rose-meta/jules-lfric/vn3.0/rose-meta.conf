# Please see jules:wiki:SharingJULESmetadata

import=lfric-jules-shared/jules-hydrology/vn3.0
      =lfric-jules-shared/jules-nvegparm/vn3.0
      =lfric-jules-shared/jules-pftparm/vn3.0
      =lfric-jules-shared/jules-radiation/vn3.0
      =lfric-jules-shared/jules-sea-seaice/vn3.0
      =lfric-jules-shared/jules-snow/vn3.0
      =lfric-jules-shared/jules-soil/vn3.0
      =lfric-jules-shared/jules-surface/vn3.0
      =lfric-jules-shared/jules-surface-types/vn3.0
      =lfric-jules-shared/jules-urban/vn3.0
      =lfric-jules-shared/jules-vegetation/vn3.0

[namelist:jules_hydrology=l_hydrology]
trigger=namelist:jules_hydrology=l_var_rainfrac: .true.;

[namelist:jules_radiation=fixed_sea_albedo]
description=If using i_sea_alb_method='fixed', the global value of albedo to use.

[namelist:jules_radiation=i_sea_alb_method]
trigger=namelist:jules_radiation=l_sea_alb_var_chl: 'jin';
       =namelist:jules_radiation=fixed_sea_albedo: 'fixed';
value-titles=Barker and Li 1995,Jin et al. 2011,Fixed global value
values='barker','jin','fixed'

[namelist:jules_radiation=l_albedo_obs]
trigger=namelist:files=albedo_vis_ancil_path: .true. ;
       =namelist:files=albedo_nir_ancil_path: .true. ;
       =namelist:jules_nvegparm=albsnf_nvgu_io: .true.;
       =namelist:jules_nvegparm=albsnf_nvgl_io: .true.;

[namelist:jules_radiation=l_sea_alb_var_chl]
trigger=namelist:files=sea_ancil_path: .true. ;

[namelist:jules_snow=can_clump]
fail-if=len(this) != namelist:jules_surface_types=npft; # A value must be given for each PFT
       =all(this == 0) and any(namelist:jules_snow=cansnowpft ==  '.true.'); # Results in floating point exception if 0. Only used if can_model = 4 (JULES default), cansnowpft = TRUE on that tile and l_embedded_snow = TRUE (LFRic default).

[namelist:jules_snow=cansnowpft]
compulsory=true
length=5

[namelist:jules_snow=i_basal_melting_opt]
values='none','instant'

[namelist:jules_snow=i_grain_growth_opt]
values='marshall','taillandier'

[namelist:jules_snow=i_relayer_opt]
values='original','inverse'

[namelist:jules_surface=anthrop_heat_option]
fail-if=this != "'dukes'"; # The DUKES fixed annual cycle is the only currently available option in LFRic
trigger=namelist:jules_surface=anthrop_heat_mean: 'flanner';
values='dukes','flanner'

[namelist:jules_surface=cor_mo_iter]
value-titles=Limit Obukhov length in low winds,
            =Improve initial guess (preferred)
values='lim_oblen','improved'

[namelist:jules_surface=fd_stability_dep]
value-titles=Off,Surface Ri
values='none','surf_ri'

[namelist:jules_surface=formdrag]
trigger=namelist:jules_surface=fd_stability_dep: 'eff_z0','dist_drag';
values='none','eff_z0','dist_drag'

[namelist:jules_surface=l_urban2t]
trigger=namelist:jules_surface_types=urban_canyon: .true.;
       =namelist:jules_surface_types=urban_roof: .true.;
       =namelist:jules_surface_types=urban: .false.;
       =namelist:jules_urban: .true.;
       =namelist:jules_urban=anthrop_heat_scale: .true.;
       =namelist:files=urban_ancil_path: .true.;
       =namelist:stochastic_physics=rp_lsfc_z0_urban_mult: .true. ;

[namelist:jules_surface=l_vary_z0m_soil]
trigger=namelist:files=soil_rough_ancil_path: .true. ;

[namelist:jules_surface=srf_ex_cnv_gust]
type=logical

[namelist:jules_vegetation=can_rad_mod]
values='one','four','five','six'

[namelist:jules_vegetation=l_spec_veg_z0]
trigger=namelist:jules_pftparm=z0v_io: .true.;
       =namelist:stochastic_physics=rp_lsfc_z0v: .true.;
       =namelist:stochastic_physics=rp_lsfc_z0v_max: .true.;
       =namelist:stochastic_physics=rp_lsfc_z0v_min: .true.;

# Dummy page to force sort order for JULES Science Settings
[namespace:science]
ns=namelist/JULES Science Settings
sort-key=Section-A12b

# Dummy page to force sort order for Snow other parameters
[namespace:snow_other]
ns=namelist/JULES Science Settings/jules_snow/Other parameters
sort-key=02

# Dummy page to force sort order for Snow radiation parameters
[namespace:snow_radiation]
ns=namelist/JULES Science Settings/jules_snow/Radiation parameters
sort-key=01

# Dummy page to force sort order for JULES Surface Types
[namespace:surface_types]
ns=namelist/JULES Surface Types
sort-key=Section-A12a
